name:  SonarCloud 
on: 
  push: 
    branches: 
      -  main 
  pull_request: 
    types: [ opened , synchronize , opened ]
 jobs: 
  build: 
    name:  Build  and  analyze 
    runs-on:  ubuntu-latest 
    steps: 
      -  uses:  actions/checkout@v4 
        with: 
          fetch-depth:  0   # Shallow clones should be désactivé pour une meilleure pertinence de l'analyse 
      -  name:  Setup  JDK 17 uses: actions/ setup  -java@v4 with: java-version: 17 distribution: 'zulu' # D'autres options de distribution sont disponibles - name: Cache SonarCloud packages uses: actions/cache@v4 with: path: ~/.sonar/cache key: ${{ runner.os }}-sonar restore-keys: ${{ runner.os }}-sonar - name: Cache Gradle packages uses: actions/cache@v4 with: path: ~/.gradle/caches key: ${{ runner.os }}-gradle-${{ hashFiles('**/*.gradle') }} restore-keys: ${{ runner.os }}-gradle - name: Construire et analyser env: GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }} # Nécessaire pour obtenir les informations PR, le cas échéant SONAR_TOKEN: ${{ secrets.SONAR_TOKEN }} run: ./gradlew build sonar --info 
         
        
           
            
          
         
        
           
             